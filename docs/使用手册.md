# 使用手册（无UI版）

## 安装
1. Python 3.10+
2. 可选：创建虚拟环境（Windows）
   - `python -m venv .venv && .venv\Scripts\activate`
3. 安装依赖
   - `pip install -r requirements.txt`

注意：首次如需语义检索，会下载开源模型（允许联网一次），下载后可离线使用。

## 启动
- Windows: 双击 run.bat 或命令行执行
- 访问 `http://127.0.0.1:8000/health`

## 导入数据
- 示例：`python scripts/import_data.py data/samples/faq_sample.jsonl`
- API：`POST /api/ingest` 传入 items 列表

## 查询
- `POST /api/query`，Body: `{ "query": "你的问题", "top_k": 5 }`
- 返回包含 candidates、confidence 与 source_id

## 故障排查
- FTS5 不可用：日志会提示，系统回退到 LIKE 检索；可继续使用但效果较弱
- 向量检索不可用：自动只用 BM25；确认是否安装 faiss-cpu、sentence-transformers
- 响应慢：降低 top_k；关闭 use_semantic；减少模型 batch_size
- 商用合规：确认所用模型与依赖许可（建议 intfloat/multilingual-e5-small）

