# Wonk Chatbot 故障排除指南

## 🚨 启动脚本闪退问题

### 问题描述
双击 `start_chatbot.bat` 后，命令行窗口立即关闭，无法启动应用。

### 解决方案

#### 方法1：使用调试版本
1. 双击 `start_chatbot_debug.bat`
2. 查看详细的错误信息
3. 根据错误信息进行相应处理

#### 方法2：手动启动
1. 按 `Win + R`，输入 `cmd`，按回车
2. 输入以下命令：
   ```cmd
   cd "C:\Users\hongk\Desktop\Wonk (Wilboerht Chatbot)"
   start_chatbot.bat
   ```
3. 这样可以看到错误信息而不会闪退

#### 方法3：检查Python环境
1. 打开命令行，输入：`python --version`
2. 确保显示 Python 3.8 或更高版本
3. 如果提示"不是内部或外部命令"，需要安装Python或添加到PATH

## 🔧 常见错误及解决方案

### 错误1：Python未安装
**错误信息**：`'python' 不是内部或外部命令`

**解决方案**：
1. 下载并安装 Python 3.8+：https://python.org/downloads/
2. 安装时勾选"Add Python to PATH"
3. 重启命令行后重试

### 错误2：虚拟环境创建失败
**错误信息**：`ERROR: Failed to create virtual environment`

**解决方案**：
1. 删除 `.venv` 文件夹（如果存在）
2. 确保有足够的磁盘空间
3. 以管理员身份运行命令行
4. 重新运行启动脚本

### 错误3：依赖安装失败
**错误信息**：`ERROR: Failed to install dependencies`

**解决方案**：
1. 检查网络连接
2. 手动安装：
   ```cmd
   .venv\Scripts\activate
   pip install --upgrade pip
   pip install flask
   ```
3. 使用国内镜像：
   ```cmd
   pip install flask -i https://pypi.tuna.tsinghua.edu.cn/simple/
   ```

### 错误4：端口被占用
**错误信息**：`Address already in use` 或端口5000被占用

**解决方案**：
1. 关闭其他使用5000端口的程序
2. 或修改 `app.py` 中的端口号：
   ```python
   app.run(host='0.0.0.0', port=8080, debug=True)
   ```

### 错误5：数据库锁定
**错误信息**：`database is locked`

**解决方案**：
1. 关闭所有聊天机器人实例
2. 删除数据库文件：
   ```cmd
   del data\database.db
   ```
3. 重新启动应用

## 🛠️ 高级故障排除

### 完全重置环境
如果遇到严重问题，可以完全重置：

1. **删除虚拟环境**：
   ```cmd
   rmdir /s .venv
   ```

2. **删除数据库**：
   ```cmd
   del data\database.db
   ```

3. **重新启动**：
   ```cmd
   start_chatbot.bat
   ```

### 检查系统要求
- **操作系统**：Windows 10/11
- **Python版本**：3.8 或更高
- **磁盘空间**：至少 500MB 可用空间
- **内存**：至少 2GB RAM
- **网络**：需要互联网连接（首次安装依赖时）

## 📞 获取帮助

如果以上方法都无法解决问题：

1. **查看详细日志**：运行 `start_chatbot_debug.bat` 获取完整错误信息
2. **检查系统环境**：确认Python版本和PATH设置
3. **重新下载项目**：可能是文件损坏导致的问题

## 🎯 预防措施

为避免常见问题：

1. **定期更新**：保持Python和pip为最新版本
2. **稳定网络**：确保网络连接稳定
3. **足够空间**：保持磁盘有足够可用空间
4. **权限检查**：确保对项目目录有读写权限

---

**记住**：大多数启动问题都是由于Python环境配置不当造成的。确保Python正确安装并添加到系统PATH是解决问题的关键！
