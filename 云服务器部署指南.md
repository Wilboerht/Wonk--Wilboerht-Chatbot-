# Wonk Chatbot äº‘æœåŠ¡å™¨éƒ¨ç½²æŒ‡å—

## ğŸ–¥ï¸ æœåŠ¡å™¨ä¿¡æ¯
- **IPåœ°å€**: 120.55.160.247
- **ç³»ç»Ÿ**: å‡è®¾ä¸º Ubuntu/Debian
- **çŠ¶æ€**: å…¨æ–°æœåŠ¡å™¨ï¼Œæœªé…ç½®

## ğŸš€ éƒ¨ç½²æ­¥éª¤

### ç¬¬ä¸€æ­¥ï¼šè¿æ¥æœåŠ¡å™¨
```bash
# ä½¿ç”¨SSHè¿æ¥æœåŠ¡å™¨
ssh root@120.55.160.247
# è¾“å…¥å¯†ç : @Whk35168
```

### ç¬¬äºŒæ­¥ï¼šä¸Šä¼ éƒ¨ç½²è„šæœ¬
æœ‰ä¸¤ç§æ–¹å¼ä¸Šä¼ æ–‡ä»¶åˆ°æœåŠ¡å™¨ï¼š

#### æ–¹å¼1ï¼šä½¿ç”¨SCPä¸Šä¼ ï¼ˆæ¨èï¼‰
åœ¨ä½ çš„æœ¬åœ°ç”µè„‘ä¸Šè¿è¡Œï¼š
```bash
# ä¸Šä¼ æ•´ä¸ªé¡¹ç›®
scp -r "C:\Users\hongk\Desktop\Wonk (Wilboerht Chatbot)" root@120.55.160.247:/tmp/

# æˆ–è€…åªä¸Šä¼ å¿…è¦æ–‡ä»¶
scp -r deploy/ root@120.55.160.247:/tmp/
scp app.py requirements.txt root@120.55.160.247:/tmp/
scp -r templates/ static/ app/ root@120.55.160.247:/tmp/
```

#### æ–¹å¼2ï¼šåœ¨æœåŠ¡å™¨ä¸Šç›´æ¥ä¸‹è½½
å¦‚æœä»£ç åœ¨GitHubä¸Šï¼š
```bash
# åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œ
cd /tmp
git clone https://github.com/your-username/wonk-chatbot.git
```

### ç¬¬ä¸‰æ­¥ï¼šæ‰§è¡Œéƒ¨ç½²è„šæœ¬

#### 3.1 åŸºç¡€ç¯å¢ƒé…ç½®
```bash
# è¿›å…¥éƒ¨ç½²ç›®å½•
cd /tmp/deploy  # æˆ– /tmp/wonk-chatbot/deploy

# ç»™è„šæœ¬æ‰§è¡Œæƒé™
chmod +x *.sh

# æ‰§è¡ŒåŸºç¡€ç¯å¢ƒé…ç½®
./server_setup.sh
```

è¿™ä¸ªè„šæœ¬ä¼šï¼š
- âœ… æ›´æ–°ç³»ç»Ÿ
- âœ… å®‰è£…Pythonã€Nginxç­‰å¿…è¦è½¯ä»¶
- âœ… é…ç½®é˜²ç«å¢™
- âœ… åˆ›å»ºåº”ç”¨ç”¨æˆ·
- âœ… åˆ›å»ºåº”ç”¨ç›®å½•

#### 3.2 å¤åˆ¶åº”ç”¨ä»£ç 
```bash
# å¤åˆ¶åº”ç”¨ä»£ç åˆ°æ­£ç¡®ä½ç½®
cp -r /tmp/wonk-chatbot/* /opt/wonk-chatbot/
# æˆ–è€…å¦‚æœæ˜¯åˆ†åˆ«ä¸Šä¼ çš„æ–‡ä»¶
cp /tmp/app.py /opt/wonk-chatbot/
cp /tmp/requirements.txt /opt/wonk-chatbot/
cp -r /tmp/templates /opt/wonk-chatbot/
cp -r /tmp/static /opt/wonk-chatbot/
cp -r /tmp/app /opt/wonk-chatbot/

# è®¾ç½®æ­£ç¡®çš„æƒé™
chown -R wonk:wonk /opt/wonk-chatbot
```

#### 3.3 éƒ¨ç½²åº”ç”¨
```bash
# æ‰§è¡Œåº”ç”¨éƒ¨ç½²è„šæœ¬
./deploy_app.sh
```

è¿™ä¸ªè„šæœ¬ä¼šï¼š
- âœ… åˆ›å»ºPythonè™šæ‹Ÿç¯å¢ƒ
- âœ… å®‰è£…ä¾èµ–åŒ…
- âœ… åˆ›å»ºsystemdæœåŠ¡
- âœ… å¯åŠ¨åº”ç”¨
- âœ… æµ‹è¯•æœåŠ¡çŠ¶æ€

#### 3.4 é…ç½®Nginxï¼ˆå¯é€‰ä½†æ¨èï¼‰
```bash
# æ‰§è¡ŒNginxé…ç½®è„šæœ¬
./setup_nginx.sh
```

è¿™ä¸ªè„šæœ¬ä¼šï¼š
- âœ… é…ç½®åå‘ä»£ç†
- âœ… è®¾ç½®å®‰å…¨å¤´
- âœ… ä¼˜åŒ–é™æ€æ–‡ä»¶æœåŠ¡
- âœ… å¯åŠ¨Nginx

### ç¬¬å››æ­¥ï¼šæµ‹è¯•è®¿é—®

#### 4.1 ç›´æ¥è®¿é—®Flaskåº”ç”¨
```bash
# æµ‹è¯•Flaskåº”ç”¨æ˜¯å¦æ­£å¸¸
curl http://localhost:5000
```

#### 4.2 å…¬ç½‘è®¿é—®æµ‹è¯•
åœ¨æµè§ˆå™¨ä¸­è®¿é—®ï¼š
- **ç›´æ¥è®¿é—®**: http://120.55.160.247:5000
- **é€šè¿‡Nginx**: http://120.55.160.247

## ğŸ”§ æœåŠ¡ç®¡ç†å‘½ä»¤

### æŸ¥çœ‹æœåŠ¡çŠ¶æ€
```bash
systemctl status wonk-chatbot
```

### å¯åŠ¨/åœæ­¢/é‡å¯æœåŠ¡
```bash
systemctl start wonk-chatbot
systemctl stop wonk-chatbot
systemctl restart wonk-chatbot
```

### æŸ¥çœ‹æ—¥å¿—
```bash
# æŸ¥çœ‹å®æ—¶æ—¥å¿—
journalctl -u wonk-chatbot -f

# æŸ¥çœ‹æœ€è¿‘çš„æ—¥å¿—
journalctl -u wonk-chatbot -n 50
```

### æŸ¥çœ‹NginxçŠ¶æ€
```bash
systemctl status nginx
nginx -t  # æµ‹è¯•é…ç½®æ–‡ä»¶
```

## ğŸ› ï¸ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. æœåŠ¡å¯åŠ¨å¤±è´¥
```bash
# æŸ¥çœ‹è¯¦ç»†é”™è¯¯
journalctl -u wonk-chatbot -n 20

# æ‰‹åŠ¨æµ‹è¯•å¯åŠ¨
cd /opt/wonk-chatbot
sudo -u wonk bash -c "source venv/bin/activate && python app.py"
```

#### 2. ç«¯å£è¢«å ç”¨
```bash
# æŸ¥çœ‹ç«¯å£å ç”¨
netstat -tlnp | grep :5000
lsof -i :5000

# æ€æ­»å ç”¨è¿›ç¨‹
kill -9 <PID>
```

#### 3. æƒé™é—®é¢˜
```bash
# é‡æ–°è®¾ç½®æƒé™
chown -R wonk:wonk /opt/wonk-chatbot
chmod +x /opt/wonk-chatbot/app.py
```

#### 4. é˜²ç«å¢™é—®é¢˜
```bash
# æ£€æŸ¥é˜²ç«å¢™çŠ¶æ€
ufw status

# å¼€æ”¾ç«¯å£
ufw allow 5000/tcp
ufw allow 80/tcp
```

## ğŸ”’ å®‰å…¨å»ºè®®

### 1. ä¿®æ”¹é»˜è®¤å¯†ç 
```bash
# ä¿®æ”¹rootå¯†ç 
passwd root

# åˆ›å»ºæ–°çš„ç®¡ç†å‘˜ç”¨æˆ·
adduser admin
usermod -aG sudo admin
```

### 2. é…ç½®SSHå¯†é’¥ç™»å½•
```bash
# ç”ŸæˆSSHå¯†é’¥å¯¹ï¼ˆåœ¨æœ¬åœ°ç”µè„‘ï¼‰
ssh-keygen -t rsa -b 4096

# ä¸Šä¼ å…¬é’¥åˆ°æœåŠ¡å™¨
ssh-copy-id root@120.55.160.247
```

### 3. ç¦ç”¨å¯†ç ç™»å½•ï¼ˆå¯é€‰ï¼‰
```bash
# ç¼–è¾‘SSHé…ç½®
nano /etc/ssh/sshd_config

# ä¿®æ”¹ä»¥ä¸‹é…ç½®
PasswordAuthentication no
PermitRootLogin prohibit-password

# é‡å¯SSHæœåŠ¡
systemctl restart ssh
```

## ğŸ“Š ç›‘æ§å’Œç»´æŠ¤

### 1. è®¾ç½®è‡ªåŠ¨å¤‡ä»½
```bash
# åˆ›å»ºå¤‡ä»½è„šæœ¬
cat > /opt/backup.sh << 'EOF'
#!/bin/bash
DATE=$(date +%Y%m%d_%H%M%S)
cp /opt/wonk-chatbot/data/database.db /opt/backups/database_$DATE.db
find /opt/backups -name "database_*.db" -mtime +7 -delete
EOF

chmod +x /opt/backup.sh

# æ·»åŠ åˆ°crontabï¼ˆæ¯å¤©å¤‡ä»½ï¼‰
echo "0 2 * * * /opt/backup.sh" | crontab -
```

### 2. ç³»ç»Ÿç›‘æ§
```bash
# æŸ¥çœ‹ç³»ç»Ÿèµ„æº
htop
df -h  # ç£ç›˜ä½¿ç”¨
free -h  # å†…å­˜ä½¿ç”¨
```

## ğŸ‰ éƒ¨ç½²å®Œæˆ

éƒ¨ç½²æˆåŠŸåï¼Œä½ çš„èŠå¤©æœºå™¨äººå°†åœ¨ä»¥ä¸‹åœ°å€å¯ç”¨ï¼š
- **ä¸»è¦è®¿é—®åœ°å€**: http://120.55.160.247
- **å¤‡ç”¨åœ°å€**: http://120.55.160.247:5000

ç°åœ¨ä»»ä½•äººéƒ½å¯ä»¥é€šè¿‡è¿™ä¸ªIPåœ°å€è®¿é—®ä½ çš„èŠå¤©æœºå™¨äººäº†ï¼

## ğŸ“ ä¸‹ä¸€æ­¥å»ºè®®

1. **åŸŸåç»‘å®š**ï¼šå¦‚æœæœ‰åŸŸåï¼Œå¯ä»¥è§£æåˆ°è¿™ä¸ªIP
2. **SSLè¯ä¹¦**ï¼šé…ç½®HTTPSåŠ å¯†è®¿é—®
3. **CDNåŠ é€Ÿ**ï¼šå¦‚æœç”¨æˆ·è¾ƒå¤šï¼Œå¯ä»¥è€ƒè™‘CDN
4. **ç›‘æ§å‘Šè­¦**ï¼šè®¾ç½®æœåŠ¡å¼‚å¸¸æ—¶çš„é€šçŸ¥
